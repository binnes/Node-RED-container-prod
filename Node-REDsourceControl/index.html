
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="How to integrate Low Code development into a production development pipeline" name="description"/>
<link href="https://binnes.github.io/Node-RED-container-prod/Node-REDsourceControl/index.html" rel="canonical"/>
<meta content="Brian Innes" name="author"/>
<link href="../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-5.5.0" name="generator"/>
<title>Source Control - Low Code Development for Production</title>
<link href="../assets/stylesheets/main.b5d04df8.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
<link href="../css/extra.css" rel="stylesheet"/>
<link href="../css/pdf-print.css" rel="stylesheet"/>
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-172132667-1","binnes.github.io/Node-RED-container-prod/"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#node-red-source-control">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Low Code Development for Production" class="md-header-nav__button md-logo" href="https://binnes.github.io/Node-RED-container-prod/" title="Low Code Development for Production">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Low Code Development for Production
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              Source Control
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/binnes/Node-RED-container-prod/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    binnes/Node-RED-container-prod
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Low Code Development for Production" class="md-nav__button md-logo" href="https://binnes.github.io/Node-RED-container-prod/" title="Low Code Development for Production">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    Low Code Development for Production
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/binnes/Node-RED-container-prod/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    binnes/Node-RED-container-prod
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../index.html" title="Home">
      Home
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        Source Control
        <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg>
</span>
</label>
<a class="md-nav__link md-nav__link--active" href="index.html" title="Source Control">
      Source Control
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#learning-objectives">
    Learning objectives
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#prerequisites">
    Prerequisites
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#estimated-time">
    Estimated time
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#steps">
    Steps
  </a>
<nav aria-label="Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-codebase">
    Step 1. Codebase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-enable-source-control-in-node-red">
    Step 2. Enable Source control in Node-RED
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-using-source-control-in-node-red">
    Step 3. Using Source control in Node-RED
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-pulling-changes-and-handling-merge-conflicts">
    Step 4. Pulling changes and handling merge conflicts
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#useful-docker-command">
    Useful Docker command
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
    Summary
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Packaging-Node-RED-apps-in-containers/index.html" title="Packaging Applications">
      Packaging Applications
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Node-RED-config-from-environment/index.html" title="Config from Environment">
      Config from Environment
    </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#learning-objectives">
    Learning objectives
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#prerequisites">
    Prerequisites
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#estimated-time">
    Estimated time
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#steps">
    Steps
  </a>
<nav aria-label="Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-codebase">
    Step 1. Codebase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-enable-source-control-in-node-red">
    Step 2. Enable Source control in Node-RED
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-using-source-control-in-node-red">
    Step 3. Using Source control in Node-RED
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-pulling-changes-and-handling-merge-conflicts">
    Step 4. Pulling changes and handling merge conflicts
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#useful-docker-command">
    Useful Docker command
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
    Summary
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/binnes/Node-RED-container-prod/edit/master/docs/Node-REDsourceControl/README.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="node-red-source-control">Node-RED Source Control<a class="headerlink" href="#node-red-source-control" title="Permanent link">¶</a></h1>
<p>In this tutorial you will learn how to enable git integration in Node-RED.  Once git integration has been turned on you will learn how to use the git integration features within the Node-RED editor.</p>
<h2 id="learning-objectives">Learning objectives<a class="headerlink" href="#learning-objectives" title="Permanent link">¶</a></h2>
<p>In this tutorial, you will learn how to:</p>
<ul>
<li>Enable Node-RED to work with git source control</li>
<li>Use the git integration features of the Node-RED editor to</li>
<li>clone a git repository</li>
<li>commit and push changes to a git server</li>
<li>pull changes from a git server</li>
<li>resolve merge conflicts within the Node-RED editor</li>
</ul>
<p>The video below shows the instructor completing the tutorial, so you can watch and follow along, or skip the video and jump to the prerequisites section.</p>
<p><a href="https://youtu.be/ecrjDfZth-w" title="Demonstration of instructor completing this tutorial"><img alt='"Demonstration of instructor completing this tutorial"' src="http://img.youtube.com/vi/ecrjDfZth-w/0.jpg"/></a></p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">¶</a></h2>
<p>To complete this tutorial, you need:</p>
<ul>
<li>some experience of using Node-RED</li>
<li>a laptop/workstation running an up to date version of Linux, Mac OS or Windows</li>
<li>an up to date version of <a href="https://www.docker.com">Docker</a> on your laptop/workstation (version 19.03 or higher should be returned by the <code>docker version</code> command)</li>
<li>Windows users need to ensure that Docker is using Linux containers.  This setting is available by right clicking the Docker icon in the status section of the Windows task bar, usually at the bottom of the screen.  You should see an option to switch to Windows containers.  If you have an option to switch to Linux containers, you need to select it as you are currently using windows based containers.<br/>
<img alt="Switch to Linux containers" class="center" src="image/linuxContainers.png" style="width: 25%"/></li>
<li>a <a href="https://github.com">github</a> account</li>
<li><a href="https://git-scm.com/downloads">git tools</a> installed on your laptop/workstation</li>
</ul>
<p>You will notice that a Node-RED installation is not a prerequisite.  In this tutorial all development is done using a Node-RED container.  Using a container ensures that all developers working on a project use a common Node-RED installation, with an '<em>approved</em>' set of Node.js packages installed in the container and nodes in the Node-RED pallet.</p>
<h2 id="estimated-time">Estimated time<a class="headerlink" href="#estimated-time" title="Permanent link">¶</a></h2>
<p>You can complete this tutorial in less than 20 minutes.</p>
<h2 id="steps">Steps<a class="headerlink" href="#steps" title="Permanent link">¶</a></h2>
<ol>
<li><a href="#step-1-codebase">Codebase</a></li>
<li><a href="#step-2-enable-source-control-in-node-red">Enable source control in Node-RED</a></li>
<li><a href="#step-3-using-source-control-in-node-red">Using Source control in Node-RED</a></li>
<li><a href="#step-4-pulling-changes-and-handling-merge-conflicts">Pulling changes and handling merge conflicts</a></li>
</ol>
<h3 id="step-1-codebase">Step 1. Codebase<a class="headerlink" href="#step-1-codebase" title="Permanent link">¶</a></h3>
<p>When using Node-RED in production, you need to be able to work within a DevOps process, which relies on application source being managed by a source control system, such as git.</p>
<p>This is also a requirement when creating cloud native applications.  The first rule for 12-factor apps is <a href="https://12factor.net/codebase">Codebase</a> - <em>One codebase tracked in revision control, many deploys</em></p>
<p>First we need to decide what is a Node-RED application code base?</p>
<p>A Node-RED application is defined by a flow file and an optional credentials file.  However, the flow may require some additional nodes to be installed.  The flow runs within a Node.js application, which is the Node-RED runtime.  This runtime can be customised and configured, so to fully capture a Node-RED application code base you need to capture the :</p>
<ul>
<li>application flow and credential file</li>
<li>the package.json file, which captures all required Node.js and Node-RED nodes needed by the flow</li>
<li>the Node-RED runtime source files</li>
</ul>
<p>For this workshop a <a href="https://github.com/binnes/Node-RED-Docker">starter git project</a> has been provided, containing a Node-RED runtime, customised to be managed by a cloud.</p>
<p>We are using the public github service to work through this tutorial, but Node-RED works with any standard git service.  So after completing the tutorial you can choose your preferred  git service or you can setup your own git server to work on premises.</p>
<p>Follow the instructions to fork the starter git repository, which is contains a starter template for a new project.  This will create a repository in your own github account so you can make changes to the content.</p>
<ol>
<li>
<p>Open a browser an navigate to the <a href="https://github.com/binnes/Node-RED-Docker">git starter project repo</a></p>
</li>
<li>
<p>Make sure you are logged into your github account then press the <strong>Fork</strong> button so you have your own copy of the repo <img alt="Fork" src="image/forkRepo.png"/></p>
</li>
<li>
<p>(OPTIONAL) If you have 2-factor authentication enabled on your github account, then you need to use a Personal Access Token when using the git command line tools.</p>
<p>To create a Personal Access Token:
* Open the git settings<br/>
<img alt="settings" class="center" src="image/gitSettings.png" style="width: 20%"/>
* select <strong>Developer settings</strong> then <strong>Personal access tokens</strong> then <strong>Generate new token</strong>.
* Give the token a use, select all scopes except <code>admin:enterprise</code> and <code>admin:gpg.key</code> scope then <strong>Generate token</strong>
<img alt="generate token" src="image/gitPAT.png"/>
* record the token as you will need it later in the tutorial.</p>
</li>
</ol>
<h3 id="step-2-enable-source-control-in-node-red">Step 2. Enable Source control in Node-RED<a class="headerlink" href="#step-2-enable-source-control-in-node-red" title="Permanent link">¶</a></h3>
<p>Node-RED has the <a href="https://nodered.org/docs/user-guide/projects/"><strong>projects</strong></a> feature, which is turned off by default.  It allows Node-RED to work with a version control system to manage the Node-RED flow and associated content.</p>
<p>There are 2 ways of enabling projects in Node-RED:</p>
<ul>
<li>Update the settings.js file in the userDirectory for Node-RED (this is the .node-red folder in your home folder by default)</li>
<li>Set the <strong>NODE_RED_ENABLE_PROJECTS</strong> environment variable before starting Node-RED</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In this tutorial we will run Node-RED in a Docker image, this removes the need for a local install of Node.js and node-RED, but if you have Node-RED already installed and want to enable the projects feature, then you should edit the settings.js file:</p>
<p>On your system edit file .node-red/settings.js in your home directory.  At the bottom of the file change the projects setting to <code>enabled : true</code></p>
<p><img alt="Enable Node-RED projects" class="center" src="image/enableProjectFeature.png" style="width: 75%"/></p>
</div>
<p>Follow the instructions below to start Node-RED with the project feature enabled.  The commands need to be entered in a command or terminal window, running as your normal login user:</p>
<ol>
<li>If Node-RED is already running on your system, stop it</li>
<li>
<p>Create a new directory called <strong>NRdata</strong> in your home directory to use as the Node-RED userDirectory:</p>
<p><code>mkdir NRdata</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>on Linux the NRdata directory needs to be writeable by user with UID 1000.  If your user UID is not 1000 then make the directory writeable by everyone:</p>
<p><code>chmod 777 NRdata</code></p>
</div>
</li>
<li>
<p>To start Node-RED use command (select your operating system.  You will need to update the path to the NRdata directory):</p>
<ul>
<li>
<p><strong>Windows</strong>:</p>
<p><code>docker run -itd -p 1880:1880 -v c:\Users\YOUR-USERNAME\NRdata:/data -e NODE_RED_ENABLE_PROJECTS=true --name mynodered nodered/node-red</code></p>
</li>
<li>
<p><strong>Mac OS</strong>:  </p>
<p><code>docker run -itd -p 1880:1880 -v /Users/YOUR-USERNAME/NRdata:/data -e NODE_RED_ENABLE_PROJECTS=true --name mynodered nodered/node-red</code></p>
</li>
<li>
<p><strong>Linux</strong>:  </p>
<p><code>docker run -itd -p 1880:1880 -v /home/YOUR-USERNAME/NRdata:/data -e NODE_RED_ENABLE_PROJECTS=true --name mynodered nodered/node-red</code></p>
</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<ul>
<li>the <strong>-e</strong> option is short for <strong>--env</strong> and sets the <strong>NODE_RED_ENABLE_PROJECTS</strong> environment variable</li>
<li>the <strong>-v</strong> option is short for <strong>--volume</strong> and maps your local <strong>NRdata</strong> directory into the container at location <strong>/data</strong>, which is configured as the userDirectory for Node-RED.</li>
<li>to see all the possible options for the Docker run command use <code>docker run --help</code></li>
</ul>
</div>
</li>
</ol>
<h3 id="step-3-using-source-control-in-node-red">Step 3. Using Source control in Node-RED<a class="headerlink" href="#step-3-using-source-control-in-node-red" title="Permanent link">¶</a></h3>
<p>The git integration built into the projects feature of Node-RED will allow you to clone an existing git repository or create a new repository from within the Node-RED editor.  You will also find a new <strong>Projects</strong> entry in the main menu, where you can change the current project, create a new project or look at the current project settings.  Node-RED stores projects files in a directory called <strong>projects</strong> in your Node-RED user directory, this defaults to <strong>.node-red/projects</strong> in your home directory on your operating system.  Each projects is stored in its own directory within the projects directory.</p>
<p>For this tutorial the Node-RED user directory is the NRdata directory you created in the previous step, so you will find project directories in <strong>NRdata/projects</strong>.</p>
<ol>
<li>
<p>Open a browser to access your local Node-RED runtime on <a href="http://localhost:1880">http://localhost:1880</a> and you should see the Projects wizard, as projects are enabled and no projects exist yet:<br/>
<img alt="project wizard" class="center" src="image/projectWizard.png" style="width: 50%"/></p>
</li>
<li>
<p>Select the Clone Repository.</p>
<ul>
<li>Enter your name and email, to be used when committing content.</li>
<li>copy the Git repo URL from <strong>your</strong> git repo github page (the URL should contain your github user name):<br/>
<img alt="github page" class="center" src="image/copyGitURL.png" style="width: 50%"/></li>
<li>Back in the Node-RED editor window, paste the github URL into the <strong>Git repository URL</strong> field.</li>
<li>
<p>Enter your git credentials for the Username and Password fields (use the Personal Access Token as the password if you have one set on your github account - your github account password will not work if a personal access token is defined) then press the <strong>Clone project</strong> button when all the details have been completed - leave the Credentials encryption key field blank<br/>
<img alt="Clone repo" class="center" src="image/cloneRepo.png" style="width: 50%"/> </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Leaving the <strong>credentials encryption key</strong> field blank means that any credentials entered in any node configuration will be checked into git unencrypted.  For this tutorial this isn't an issue as we want to go look at the credentials.  For your own projects you may want to enter an encryption key, unless you plan to provide all credentials at run time and want to inspect the credentials file to verify there are no captured credentials.</p>
</div>
</li>
</ul>
</li>
<li>
<p>Drag an inject and debug node onto the sheet and connect them to create a basic flow then deploy the changes<br/>
<img alt="basic flow" class="center" src="image/basicFlow.png" style="width: 50%"/></p>
</li>
<li>
<p>Switch to the project history section in the side panel, where you can see the flows.json file has uncommitted local changes.  Move your mouse over the entry and press the <strong>+</strong> button to stage the change<br/>
<img alt="stage change" class="center" src="image/gitStage.png" style="width: 35%"/></p>
</li>
<li>
<p>The flows.json file is now ready to be committed.  Press the commit button then enter a commit message <strong>basic flow</strong> to commit the flow change<br/>
<img alt="commit" class="center" src="image/gitCommit.png" style="width: 35%"/></p>
</li>
<li>
<p>Switch to the <strong>Commit History</strong> section of the project side panel.  Here you can see the last commit and also that the local git branch is 1 commit ahead of the remote master.  Click the up arrow to open the Manage remote branch panel<br/>
<img alt="commit history" class="center" src="image/commitHistory.png" style="width: 35%"/></p>
</li>
<li>
<p>Press the <strong>Push</strong> button to send the commit to the remote branch<br/>
<img alt="git push" class="center" src="image/gitPush.png" style="width: 35%"/></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is an issue when running on Windows 10 - the git push is not always passing the git credentials correctly.  If this is the case you can issue a <code>git push</code> command from a command window.  Change to the active git project directory : \[<em>user home directory</em>]\NRdata\projects\[<em>repo name</em>] then issue the git push command.</p>
</div>
</li>
</ol>
<h3 id="step-4-pulling-changes-and-handling-merge-conflicts">Step 4. Pulling changes and handling merge conflicts<a class="headerlink" href="#step-4-pulling-changes-and-handling-merge-conflicts" title="Permanent link">¶</a></h3>
<p>You can also pull changes from the repo, so if a team is working on the same Node-RED application they can push their individual changes and the other team members can pull the changes.  </p>
<p>It is recommended that team members use different tabs in the Node-RED editor when collaborating to avoid merge conflicts, but if a merge conflict does occur, then it can be resolved within the Node-RED editor.</p>
<p>Follow the instructions below to cause a merge conflict then resolve it.</p>
<ol>
<li>
<p>In the <a href="https://github.com">GitHub web UI</a> open your forked project then open the flows.json page</p>
</li>
<li>
<p>Select the pencil icon to start editing the file<br/>
<img alt="Edit flow" src="image/editFlowGitHub.png"/></p>
</li>
<li>
<p>Find the x and y coordinates of the inject node and modify them, add or remove 10 to each of the values for x and y<br/>
<img alt="Update node location" src="image/updateNodeLocation.png"/></p>
</li>
<li>
<p>Press the <strong>Commit changes</strong> to save the change and commit the change to the master branch of the GitHub repo.<br/>
<img alt="Commit location change" src="image/commitLocationChange.png"/></p>
</li>
<li>
<p>Back in the Node-RED editor move the inject node to a new location, then press the <strong>Deploy</strong> button to make the change live.</p>
</li>
<li>
<p>Open the git section of the side panel then stage and commit the update to the flow.</p>
</li>
<li>
<p>Open up the Commit History section and refresh the panel.  You will now see 1 change to push and 1 change to pull.<br/>
<img alt="incoming change" class="center" src="image/incomingChange.png" style="width: 35%"/></p>
</li>
<li>
<p>Clicking to manage the remote branch you will see the pull button enabled, select the pull button to bring in the change you made directly in GitHub<br/>
<img alt="pull remote changes" class="center" src="image/pullChanges.png" style="width: 35%"/></p>
</li>
<li>
<p>You should get a notification that automatic merging failed - which is expected as the GitHub change and your local change in the Node-RED editor made different changes to the same node.  Select the <strong>Show merge conflicts</strong> button in the notification window<br/>
<img alt="auto merge failed" class="center" src="image/autoMergeFailed.png" style="width: 35%"/></p>
</li>
<li>
<p>There is now a new section in the git panel - <strong>Unmerged changes</strong>.  Click the flow.json file to open the resolve conflicts window, highlighting where the conflicts are.<br/>
<img alt="unmerged changes" class="center" src="image/unmergedChanges.png" style="width: 35%"/></p>
</li>
<li>
<p>Expand the twisties until you can see the conflicting positions for the inject node.  You will also notice a radio button allowing you to select which version of the conflicting changes you want to accept.<br/>
<img alt="resolve merge conflicts" src="image/resolveConflict.png"/></p>
</li>
<li>
<p>Select one of the versions by clicking the radio button.  The version which will be saved is highlighted in green and the version that will be overwritten is highlighted in red.  When all conflicts have been resolved click the <strong>Save conflict resolution</strong> button.</p>
</li>
<li>
<p>There is a new change to commit - this is the merge resolution commit.  Commit the change then navigate to the Commit History section of the Git side panel.  Here you will see there are no incoming changes, but there are 2 outgoing changes.  The original committed change and the merge resolution change.  Select <strong>Manage remote branch</strong> then push the changes.<br/>
<img alt="push conflict resolution" class="center" src="image/pushConflictResolution.png" style="width: 35%"/></p>
</li>
</ol>
<h2 id="useful-docker-command">Useful Docker command<a class="headerlink" href="#useful-docker-command" title="Permanent link">¶</a></h2>
<p>Here are a few useful Docker commands:</p>
<ul>
<li><code>docker ps -a</code> : list all containers (running and stopped)</li>
<li><code>docker stop mynodered</code> : will stop the container instance named <strong>mynodered</strong>, but leave the container resources intact</li>
<li><code>docker start mynodered</code> : will start a stopped container instance named <strong>mynodered</strong></li>
<li><code>docker rm mynodered</code> : will remove all resources for container instance named <strong>mynodered</strong>.  The container instance must be stopped before it can be removed</li>
</ul>
<p>You can remove the <strong>mynodered</strong> container instance without loosing any data, as the docker run command mapped the <strong>NRdata</strong> directory into the container, so all Node-RED data has been persisted in that directory, outside the container.  </p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">¶</a></h2>
<p>In this tutorial you:</p>
<ul>
<li>Enabled the projects feature in the Node-RED editor to provide integration with Git version control systems</li>
<li>Cloned a GitHub project from within the Node-RED editor</li>
<li>Committed and pushed changes to GitHub</li>
<li>pulled changes from GitHub and resolved a merge conflict within the Node-RED editor</li>
</ul>
<p>You can now work with Node-RED in a team environment synchronising via a Git repository, ensuring all changes to your Node-RED applications are version controlled.</p>
<p>Move onto the <a href="../Packaging-Node-RED-apps-in-containers/index.html">next tutorial</a>, where you will learn how to package your application into a container.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../index.html" rel="prev" title="Home">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../Packaging-Node-RED-apps-in-containers/index.html" rel="next" title="Packaging Applications">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Packaging Applications
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
 ... <a download href="../pdf/lowCodeDev.pdf" title="PDF">download PDF</a></div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/vendor.92ffa368.min.js"></script>
<script src="../assets/javascripts/bundle.5123e3d4.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>